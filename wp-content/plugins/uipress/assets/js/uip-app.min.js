const uipTranslations=JSON.parse(uip_ajax.translations),uipMasterPrefs=JSON.parse(uip_ajax.masterPrefs),uipDefaults=JSON.parse(uip_ajax.defaults),uipUserPrefs=JSON.parse(uip_ajax.preferences),uipNetwork=uip_ajax.network;function uipNotification(t){var e;(e=document.getElementById("notification-drop"))||((e=document.createElement("div")).setAttribute("id","notification-drop"),document.body.appendChild(e));var i=document.createElement("div");i.classList.add("uip-notification"),i.innerHTML=t,e.appendChild(i),setTimeout(function(){i.remove()},8e3)}function uip_check_for_updates(){jQuery.ajax({url:uip_ajax.ajax_url,type:"post",data:{action:"uip_check_for_updates",security:uip_ajax.security},success:function(t){t&&(data=JSON.parse(t),data.error?uipNotification(data.message,"danger"):(uipNotification(data.message,"success"),location.reload()))}})}function importOldSettings(t){uipNotification(uipTranslations.importStarted,"danger"),jQuery.ajax({url:uip_ajax.ajax_url,type:"post",data:{action:"uip_import_old_settings",security:uip_ajax.security,network:t},success:function(t){t&&(data=JSON.parse(t),data.error?uipNotification(data.message,"danger"):(uipNotification(data.message,"success"),location.reload()))}})}function hideImportSettings(t){jQuery.ajax({url:uip_ajax.ajax_url,type:"post",data:{action:"uip_hide_import_old_settings",security:uip_ajax.security,network:t},success:function(t){t&&(data=JSON.parse(t),data.error?uipNotification(data.message,"danger"):(uipNotification(data.message,"success"),location.reload()))}})}const UIPadminMenuOptions={data:()=>({loading:!0,screenWidth:window.innerWidth,translations:uipTranslations,masterPrefs:uipMasterPrefs,userPreferences:uipUserPrefs,appDefaults:uipDefaults}),watch:{},created:function(){window.addEventListener("resize",this.getScreenWidth)},computed:{returnDefaults(){return this.appDefaults}},mounted:function(){window.setInterval(()=>{},15e3),this.loading=!1,this.getScreenWidth()},methods:{getScreenWidth(){this.screenWidth=window.innerWidth,this.isSmallScreen()?(jQuery("#adminmenumain").addClass("uip-hidden"),this.appDefaults.mobile=!0):(jQuery("#adminmenumain").removeClass("uip-hidden"),this.appDefaults.mobile=!1)},isSmallScreen(){return this.screenWidth<900}},template:'<get-menu v-if="!loading"  :translations="translations"  :appPrefs="userPreferences"   :appDefaults="returnDefaults"  :appOptions="masterPrefs" ></get-menu>'},UIPmenu=uipVue.createApp(UIPadminMenuOptions);UIPmenu.component("get-menu",{props:{translations:Object,appPrefs:Object,appDefaults:Object,appOptions:Object},data:function(){return{loading:!0,masterMenu:[],preferences:[]}},mounted:function(){this.getMenu(),this.loading=!1},computed:{formatPrefs(){return this.preferences}},methods:{updatePrefs(t){if(1!=this.appOptions.dataConnect)return;let e=this;this.preferences=t;let i={};for(var s of Object.keys(e.preferences))i[s]=e.preferences[s];data={action:"uip_save_prefs",security:uip_ajax.security,userPref:i},jQuery.ajax({url:uip_ajax.ajax_url,type:"post",data:data,success:function(t){data=JSON.parse(t),data.error,console.log(t)}})},getMenu(){let t=this;jQuery.ajax({url:uip_ajax.ajax_url,type:"post",data:{action:"uip_get_menu",security:uip_ajax.security},success:function(e){data=JSON.parse(e),data.error||(t.preferences=data.prefs,t.masterMenu=t.processCustom(data.menu),t.formatPrefs)}})},processCustom(t){if("true"!=t.customMenu)return t;let e=jQuery("#adminmenu a[aria-current='page']").attr("href"),s=t.menu;if("true"==t.customMenu&&e)for(i=0;i<s.length;i++){let t=s[i];if("sep"!=t.type&&(t.url&&""!=t.url?link=t.url:t.href&&(link=t.href),"admin.php?page=admin_2020_content"==link&&(t.url="admin.php?page=uip-content",link=t.url),"options-general.php?page=admin-2020-menu-creator"==link&&(t.url="options-general.php?page=uip-menu-creator",link=t.url),"options-general.php?page=admin2020-settings"==link&&(t.url="options-general.php?page=uip-settings",link=t.url),link==e&&(t.active=!0),t.submenu&&t.submenu.length>0)){let i=0;for(p=0;p<t.submenu.length;p++){let s=t.submenu[p];name=s.name.toLowerCase(),s.url&&""!=s.url?link=s.url:s.href&&(link=s.href),"admin.php?page=admin_2020_content"==link&&(s.url="admin.php?page=uip-content",link=s.url),"options-general.php?page=admin-2020-menu-creator"==link&&(s.url="options-general.php?page=uip-menu-creator",link=s.url),"options-general.php?page=admin2020-settings"==link&&(s.url="options-general.php?page=uip-settings",link=s.url),link==e&&(i+=1,s.active=!0)}1==t.active&&0==i&&(t.active=!1),i>0&&(t.active=!0)}}return t}},template:'<toolbar-logo :defaults="appDefaults" :options="appOptions" :translations="translations" :preferences="formatPrefs"></toolbar-logo>    <build-menu  :appDefaults="appDefaults" :appPrefs="appOptions" :preferences="formatPrefs" :translations="translations" :masterMenu="masterMenu"></build-menu>  \t<build-options :appDefaults="appDefaults" :appPrefs="appOptions" :preferences="formatPrefs" :updateFunc="updatePrefs" :translations="translations"></build-options>'}),UIPmenu.component("build-menu",{props:{masterMenu:Object,translations:Object,preferences:Object,appPrefs:Object,appDefaults:Object},data:function(){return{loading:!0,searchString:""}},computed:{menuWithSearch(){let t=this.masterMenu.menu,e=Object.assign([],t),s=[];if(this.searchString.length>0){let t=this.searchString.toLowerCase();for(i=0;i<e.length;i++){let n=[],a=e[i];if("sep"!=a.type){if(a.submenu)for(p=0;p<a.submenu.length;p++){let e=a.submenu[p];name=e.name.toLowerCase(),name.includes(t)&&n.push(e)}n.length>0?(a.active=!0,a.submenu=n,pos=s.push(a)):(name=a.name.toLowerCase(),name.includes(t)&&s.push(a))}}return s}return s=t}},mounted:function(){this.loading=!1},methods:{showSubMenu(t,e){(this.preferences.showSubmenuHover||this.preferences.menuShrunk)&&(t.hover=!0);this.$el.getBoundingClientRect().left,this.$el.getBoundingClientRect().top},hideSubMenu(t){(this.preferences.showSubmenuHover||this.preferences.menuShrunk)&&(t.hover=!1)},showSearch(){return 1!=this.appPrefs.menu.options["search-enabled"].value&&(1!=this.preferences.hideSearch&&(1!=this.preferences.menuShrunk||1==this.appDefaults.mobile))},isShrunkMenu(){return 1!=this.appDefaults.mobile&&(1==this.preferences.menuShrunk||"true"==this.preferences.menuShrunk)},getItemUrl(t){let e="";return t.url&&""!=t.url?e=t.url:t.href&&(e=t.href),e},hrefTarget:t=>t&&""!=t&&("1"==t||1==t||"true"==t)?"_BLANK":""},template:'<div class="uip-body-font uip-menu-padding uip-flex-grow uip-overflow-auto" id="uip-menu-content">\t  <div v-if="showSearch()" class="uip-margin-bottom-m uip-padding-xxs uip-background-muted uip-border-round">\t  \t<div class="uip-flex uip-flex-center">  \t\t\t<span class="uip-margin-right-xs uip-text-muted">  \t\t\t  <span class="material-icons-outlined">manage_search</span>  \t\t\t</span>   \t\t\t<input type="search" :placeholder="translations.searchMenu" class="uip-blank-input uip-min-width-0 uip-flex-grow"  v-model="searchString">  \t\t</div>\t  </div>\t  <div>\t\t<template v-for="item in menuWithSearch">      \x3c!-- SEP --\x3e\t\t\t<div v-if="item.type == \'sep\' && !item.name" class="uip-margin-m"></div>      <div v-if="item.type == \'sep\' && item.name" class="uip-margin-bottom-xxs uip-padding-xxs uip-margin-top-s uip-text-bold uip-text-emphasis">{{item.name}}</div>      \x3c!-- NORMAL MENU --\x3e\t\t\t<li class="uip-margin-remove" v-if="item.type != \'sep\'" @mouseover="showSubMenu(item, $event)" @mouseleave="hideSubMenu(item)" :class="{ \'toplevel_page_jetpack\' : \'toplevel_page_jetpack\' == item.id}">\t\t\t\t<div class="uip-margin-bottom-xxs uip-padding-xxs uip-border-round hover:uip-background-muted"\t\t\t\t:class="{\'uip-background-muted \' : item.active}">\t\t\t\t\t<div class="uip-flex uip-flex-center">\t\t\t\t\t\t<a :href="getItemUrl(item)" v-if="preferences.hideIcons != true" class="uip-margin-right-xs uip-link-muted" :class="{\'uip-text-emphasis\' : item.active}"  v-html="item.icon" :target="hrefTarget(item.blankPage)"></a>\t\t\t\t\t\t<a :href="getItemUrl(item)" :class="{\'uip-text-emphasis \' : item.active}" class="uip-text-bold uip-link-muted"\t\t\t\t\t\tv-if="!isShrunkMenu()" v-html="item.name" :target="hrefTarget(item.blankPage)"></a>\t\t\t\t\t\t<span v-if="item.submenu && item.submenu.length > 0 && !isShrunkMenu() && !preferences.showSubmenuHover"             @click="item.active = !item.active" class="uip-cursor-pointer uip-flex-grow uip-text-right" :class="{\'uip-text-emphasis \' : item.active}">\t\t\t\t\t\t\t<span v-if="!item.active" class="material-icons-outlined">chevron_left</span>\t\t\t\t\t\t\t<span v-if="item.active" class="material-icons-outlined">expand_more</span>\t\t\t\t\t\t</span>            <span v-if="item.submenu && item.submenu.length > 0 && !isShrunkMenu() && preferences.showSubmenuHover"             @click="item.active = !item.active" class="uip-cursor-pointer uip-flex-grow uip-text-right" :class="{\'uip-text-emphasis \' : item.active}">              <span class="material-icons-outlined">chevron_right</span>            </span>\t\t\t\t\t</div>\t\t\t\t</div>\t\t\t\t\x3c!-- NORMAL SUB MENU --\x3e\t\t\t\t<div v-if="item.submenu && item.active && preferences.showSubmenuHover != true && !isShrunkMenu()" class="uip-padding-top-xs uip-margin-bottom-s uip-sub-menu" style="margin-left:3px;"\t\t\t\t:class="{\'uip-padding-left-xs \' : preferences.hideIcons, \'uip-padding-left-m \' : preferences.hideIcons != true}">\t\t\t\t\t<template v-for="subitem in item.submenu">\t\t\t\t\t\t<div class="uip-margin-bottom-xxs">\t\t\t\t\t\t\t<a :target="hrefTarget(subitem.blankPage)" :href="getItemUrl(subitem)" :class="{\'uip-text-emphasis uip-text-bold\' : subitem.active}" class="uip-link-muted" v-html="subitem.name"></a>\t\t\t\t\t\t</div>\t\t\t\t\t</template>\t\t\t\t</div>\t\t\t\t\x3c!-- HOVER MENU --\x3e        <uip-menu-dropdown v-if="(item.submenu && item.submenu.length > 0 && item.hover) && (preferences.showSubmenuHover || isShrunkMenu())" >          <template v-for="subitem in item.submenu">            <div class="uip-margin-bottom-xxs">              <a :target="hrefTarget(subitem.blankPage)" :href="getItemUrl(subitem)" :class="{\'uip-text-emphasis uip-text-bold\' : subitem.active}" class="uip-link-muted" v-html="subitem.name"></a>            </div>          </template>        </uip-menu-dropdown>      </li>\t\t</template>\t  </div>  </div>'}),UIPmenu.component("uip-menu-dropdown",{props:{},data:function(){return{modelOpen:!1}},mounted:function(){this.getTop},computed:{getTop(){self=this,returnDatat=0;let t=self.$el.getBoundingClientRect().top,e=self.$el.getBoundingClientRect().right+10;returnDatat=t+"px",submenu=self.$el.getElementsByClassName("uip-sub-menu")[0];let i=submenu.getBoundingClientRect();submenu.setAttribute("style","top:"+returnDatat+";left:"+e+"px"),i.bottom>(window.innerHeight-50||document.documentElement.clientHeight-50)&&submenu.setAttribute("style","top: "+(t-i.height+30)+"px;left:"+e+"px")}},methods:{},template:'<div class="uip-w-100p uip-min-w-28">      <div class="uip-position-absolute uip-padding-s uip-background-default uip-border-round uip-shadow uip-drop-right uip-w-150 uip-sub-menu" >          <slot></slot>      </div>    </div>'}),UIPmenu.component("toolbar-logo",{props:{defaults:Object,options:Object,translations:Object,preferences:Object},data:function(){return{loading:!0}},mounted:function(){this.loading=!1},computed:{menuCollapsed(){return this.preferences.menuShrunk},isDarkMode(){return 1==this.preferences.darkmode||"true"==this.preferences.darkmode}},methods:{getLogo(){return 1!=this.menuCollapsed&&"true"!=this.menuCollapsed||!this.options.menu.options["light-logo-collapsed"].value?this.options.menu.options["light-logo"].value?this.options.menu.options["light-logo"].value:this.defaults.logo:this.options.menu.options["light-logo-collapsed"].value},getDarkLogo(){return 1!=this.menuCollapsed&&"true"!=this.menuCollapsed||!this.options.menu.options["dark-logo-collapsed"].value?this.options.menu.options["dark-logo"].value?this.options.menu.options["dark-logo"].value:this.defaults.darkLogo:this.options.menu.options["dark-logo-collapsed"].value},isTrue:t=>"true"==t||1==t||"false"!=t&&0!=t&&""!=t&&void 0,showTitle(){return 1==this.options.menu.options["show-site-logo"].value}},template:'<div class="uip-flex uip-flex-center uip-menu-padding uip-margin-bottom-s" style="padding-bottom:0;">        <div class="uip-margin-right-s">            <a v-if="!loading" :href="defaults.adminHome" class="uip-no-outline">                <img class="uip-display-block uip-h-28 uip-max-h-28 uip-light-logo" :src="getLogo()">                <img class="uip-display-block uip-h-28 uip-max-h-28 uip-dark-logo" :src="getDarkLogo()">            </a>            <a v-if="loading" href="#">                <div class="uip-border-circle uip-background-muted" style="height:35px;width:35px;"></div>            </a>        </div>        <div v-if="showTitle()" class="uip-margin-right-m uip-text-bold uip-text-m uip-body-font">          {{defaults.siteName}}        </div>    </div>'}),UIPmenu.component("build-options",{emits:["updateprefs"],props:{translations:Object,updateFunc:Function,preferences:Object,appPrefs:Object,appDefaults:Object},data:function(){return{loading:!0,ui:{options:!1},user:{prefs:this.preferences}}},watch:{preferences:function(t,e){this.user.prefs=t}},computed:{isMobile(){return this.appDefaults.mobile}},mounted:function(){this.loading=!1},methods:{onClickOutside(t){const e=t.path||(t.composedPath?t.composedPath():void 0);!e||e.includes(this.$el)||this.$el.contains(t.target)||this.closeThisComponent()},openThisComponent(){this.ui.options=1!=this.ui.options,requestAnimationFrame(()=>{document.documentElement.addEventListener("click",this.onClickOutside,!1)})},closeThisComponent(){this.ui.options=!1,document.documentElement.removeEventListener("click",this.onClickOutside,!1)},toggleMenuFold(){this.user.prefs.menuShrunk?(jQuery("html").attr("menu-folded",!1),this.user.prefs.menuShrunk=!1,this.updateFunc(this.user.prefs)):(jQuery("html").attr("menu-folded",!0),this.user.prefs.menuShrunk=!0,this.updateFunc(this.user.prefs))}},template:'<div class="uip-body-font uip-padding-s">\t\t <div class="uip-background-muted uip-border-round uip-flex uip-flex-center uip-flex-between" :class="{\'uip-padding-xxs\' : preferences.menuShrunk != true}">\t\t\t <span @click="toggleMenuFold()" class="material-icons-outlined uip-padding-xxs uip-border-round hover:uip-background-grey uip-cursor-pointer"\t\t\t :class="{\'uip-rotate-180\' : preferences.menuShrunk}" v-if="isMobile != true">menu_open</span>\t\t\t <div class="uip-position-relative" v-if="preferences.menuShrunk != true">\t\t\t\t <span @click="openThisComponent" class="material-icons-outlined uip-padding-xxs uip-border-round hover:uip-background-grey uip-cursor-pointer">more_horiz</span>\t\t\t\t <div v-if="ui.options" class="uip-position-absolute uip-padding-s uip-background-default uip-border-round uip-shadow uip-drop-top uip-w-250">\t\t\t\t \t<div class="uip-margin-bottom-m uip-flex uip-flex-center">\t\t\t\t\t\t<div class="uip-text-bold uip-margin-right-s ">{{translations.menuPreferences}}</div>\t\t\t\t\t\t<feature-flag v-if="appPrefs.dataConnect != true" :translations="translations"></feature-flag>\t\t\t\t\t</div>\t\t\t\t\t\x3c!-- HIDE SEARCH BAR --\x3e\t\t\t\t \t<div class="uip-margin-bottom-s uip-flex uip-flex-between">\t\t\t\t\t\t <span class="uip-text-muted uip-margin-right-s">{{translations.hideSearchBar}}</span>\t\t\t\t\t\t <label class="uip-switch" :class="{\'uip-disabled\' : appPrefs.dataConnect != true}">\t\t\t\t\t\t   <input type="checkbox" v-model="user.prefs.hideSearch" @change="updateFunc(user.prefs)">\t\t\t\t\t\t   <span class="uip-slider"></span>\t\t\t\t\t\t </label>\t\t\t\t    </div>\t\t\t\t    \x3c!-- HIDE ICONS --\x3e\t\t\t\t\t<div class="uip-margin-bottom-s uip-flex uip-flex-between">\t\t\t\t\t\t<span class="uip-text-muted uip-margin-right-s">{{translations.hideIcons}}</span>\t\t\t\t\t\t<label class="uip-switch" :class="{\'uip-disabled\' : appPrefs.dataConnect != true}">\t\t\t\t\t\t  <input type="checkbox" v-model="user.prefs.hideIcons" @change="updateFunc(user.prefs)">\t\t\t\t\t\t  <span class="uip-slider"></span>\t\t\t\t\t\t</label>\t\t\t\t    </div>\t\t\t\t\t\x3c!-- SHOW SUBMENU ON HOVER --\x3e\t\t\t\t\t<div class="uip-flex uip-flex-between">\t\t\t\t\t\t<span class="uip-text-muted uip-margin-right-s">{{translations.showSubmenuHover}}</span>\t\t\t\t\t\t<label class="uip-switch" :class="{\'uip-disabled\' : appPrefs.dataConnect != true}">\t\t\t\t\t\t  <input type="checkbox" v-model="user.prefs.showSubmenuHover" @change="updateFunc(user.prefs)">\t\t\t\t\t\t  <span class="uip-slider"></span>\t\t\t\t\t\t</label>\t\t\t\t\t</div>\t\t\t\t </div>\t\t\t </div>\t\t </div>\t  </div>'}),UIPmenu.component("feature-flag",{props:{translations:Object},data:function(){return{loading:!0}},mounted:function(){},methods:{},template:'<span class="uip-padding-xxs uip-border-round uip-background-orange uip-text-bold uip-text-white uip-flex">\t  <span class="material-icons-outlined uip-margin-right-xs">\t  \tcard_giftcard\t  </span>  \t  <span>\t\t{{translations.preFeature}}\t  </span>  \t</span>'}),jQuery("#uip-admin-menu").length>0&&UIPmenu.mount("#uip-admin-menu");